<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>A premiere on system design | adonese&#39;s Blog</title>
<meta name="keywords" content="" />
<meta name="description" content="We run noebs and it is by far the most feature complete payment middleware in Sudan. Noebs is used by different banks and other payment providers, in addition to us. This post is not about that, I want to discuss more on what is it like to build such a system.
When doing software, we almost always tend to make more features, and many times it is because of the sheer joy of doing so.">
<meta name="author" content="">
<link rel="canonical" href="/post/2020-01-04-systems-design/" />


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.6f60056d44d3f7eb69a4bc6c332b59960f3a995802bded244750232f33713c49.css" integrity="sha256-b2AFbUTT9&#43;tppLxsMytZlg86mVgCve0kR1AjLzNxPEk=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" href="apple-touch-icon.png">
<link rel="mask-icon" href="safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.88.1" />
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="A premiere on system design" />
<meta property="og:description" content="We run noebs and it is by far the most feature complete payment middleware in Sudan. Noebs is used by different banks and other payment providers, in addition to us. This post is not about that, I want to discuss more on what is it like to build such a system.
When doing software, we almost always tend to make more features, and many times it is because of the sheer joy of doing so." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/2020-01-04-systems-design/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2020-01-04T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2020-01-04T00:00:00&#43;00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="A premiere on system design"/>
<meta name="twitter:description" content="We run noebs and it is by far the most feature complete payment middleware in Sudan. Noebs is used by different banks and other payment providers, in addition to us. This post is not about that, I want to discuss more on what is it like to build such a system.
When doing software, we almost always tend to make more features, and many times it is because of the sheer joy of doing so."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "A premiere on system design",
      "item": "/post/2020-01-04-systems-design/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "A premiere on system design",
  "name": "A premiere on system design",
  "description": "We run noebs and it is by far the most feature complete payment middleware in Sudan. Noebs is used by different banks and other payment providers, in addition to us. This post is not about that, I want to discuss more on what is it like to build such a system.\nWhen doing software, we almost always tend to make more features, and many times it is because of the sheer joy of doing so.",
  "keywords": [
    
  ],
  "articleBody": "We run noebs and it is by far the most feature complete payment middleware in Sudan. Noebs is used by different banks and other payment providers, in addition to us. This post is not about that, I want to discuss more on what is it like to build such a system.\nWhen doing software, we almost always tend to make more features, and many times it is because of the sheer joy of doing so. Fixing bugs is boring, and optimizing the system to gain more performance is quite hard. The easiest thing is to just build a new feature! This is also very clear when adopting a new technology or maintaining the old one. We all love the shiny new thing.\nnoebs is written in GO, we could have used Python instead. In fact, when i built noebs i first started with a Python project! Python is quite very hard to maintain actually. Runtime errors have been very hard on me during my work at @Morsal. Go feels just awesome for this work. After that we settled on gorm and sqlite for database driver and database respectively. You can see that none of these choices are “enterprise software”. The enterprise-y world runs on Java + MySQL and friends, not those “development tools!” Feedback loop is very important. Development time is extremely important. Noebs by all means is a toy project and i will always make sure to make it that way. If you take the joy out of programming, it becomes a task, and i happen to hate tasks.\nWe were in the early days of building what becomes later Solus. We had a market to catch, and I really didn’t need to fight with the database server, or try and debug it. We just need a local “testing” database, and later we can change that!\nGradually building There’s no such thing as a final release. We all know that, but do we really work accordingly? Noebs has had more than 500 commits past year, which means nearly 2 commits per day. We nearly deploy new code EVERYDAY, more than once! This is insane right? There’s no magic though:\n we use Azure DevOps it runs our test suite reports the results [can optionally deploy to our testing server]  Noebs was not meant to be a fully fledged system. In fact, i deliberately tried to make it as simple as possible. We work in electronic payment. I happened to work with really old and complicated embedded system POS. We had this HUGE payment system i used to maintain. It has all of the payment features and more. It has everything, too much of everything. It was a huge monolithic system with the payment logic mostly tied to the business logic–and that’s a big mistake!\n The thin-est available layer\n Noebs is fully compatible with EBS[2] APIs. It can be used easily as a drop-in-replacement for EBS actually!\nGrow independantly We write software in pieces. Just like how we (or we should) write a program. We organize it into pieces.\nfunction reader(f: string) { // read some data } function process(d: Type) { // process data } function writer(f: string) { // write data } main(){ } The same applies to systems, as well.\n http services / endpoints database and persistent layer logging and instrumentation  And as simple and quite the case that might be, people often miss it and don’t generalize this to other situations.\n",
  "wordCount" : "574",
  "inLanguage": "en",
  "datePublished": "2020-01-04T00:00:00Z",
  "dateModified": "2020-01-04T00:00:00Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/post/2020-01-04-systems-design/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "adonese's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="" accesskey="h" title="adonese&#39;s Blog (Alt + H)">adonese&#39;s Blog</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      A premiere on system design
    </h1>
    <div class="post-meta"><span title='2020-01-04 00:00:00 +0000 UTC'>January 4, 2020</span>

</div>
  </header> 
  <div class="post-content"><p>We run <a href="https://github.com/adonese/noebs">noebs</a> and it is by far the most feature complete payment middleware in Sudan. Noebs is used by different banks and other payment providers, in addition to us. This post is not about that, I want to discuss more on what is it like to build such a system.</p>
<p>When doing software, we almost always tend to make more features, and many times it is because of the sheer joy of doing so. Fixing bugs is boring, and optimizing the system to gain more performance is quite hard. The easiest thing is to just build a new feature! This is also very clear when adopting a new technology or maintaining the old one. We all love the shiny new thing.</p>
<p>noebs is written in GO, we could have used Python instead. In fact, when i built noebs i first started with a Python project! Python is quite very hard to maintain actually. Runtime errors have been very hard on me during my work at @Morsal. Go feels just awesome for this work. After that we settled on gorm and sqlite for database driver and database respectively. You can see that none of these choices are &ldquo;enterprise software&rdquo;.
The enterprise-y world runs on Java + MySQL and friends, not those &ldquo;development tools!&rdquo; Feedback loop is very important. Development time is extremely important. Noebs by all means is a toy project and i will always make sure to make it that way. If you take the joy out of programming, it becomes a task, and i happen to hate tasks.</p>
<p>We were in the early days of building what becomes later <a href="https://soluspay.net">Solus</a>. We had a market to catch, and I really didn&rsquo;t need to fight with the database server, or try and debug it. We just need a local &ldquo;testing&rdquo; database, and later we can change that!</p>
<h1 id="gradually-building">Gradually building<a hidden class="anchor" aria-hidden="true" href="#gradually-building">#</a></h1>
<p>There&rsquo;s no such thing as a final release. We all know that, but do we really work accordingly? Noebs has had more than 500 commits past year, which means nearly 2 commits per day. We nearly deploy new code EVERYDAY, more than once! This is insane right? There&rsquo;s no magic though:</p>
<ul>
<li>we use Azure DevOps</li>
<li>it runs our test suite</li>
<li>reports the results</li>
<li>[can optionally deploy to our testing server]</li>
</ul>
<p>Noebs was not meant to be a fully fledged system. In fact, i deliberately tried to make it as simple as possible.
We work in electronic payment. I happened to work with really old and complicated embedded system POS. We had this HUGE payment system i used to maintain. It has all of the payment features and more. It has everything, too much of everything. It was a huge monolithic system with the payment logic mostly tied to the business logic&ndash;and that&rsquo;s a big mistake!</p>
<blockquote>
<p>The thin-est available layer</p>
</blockquote>
<p>Noebs is fully compatible with EBS[2] APIs. It can be used easily as a drop-in-replacement for EBS actually!</p>
<h2 id="grow-independantly">Grow independantly<a hidden class="anchor" aria-hidden="true" href="#grow-independantly">#</a></h2>
<p>We write software in pieces. Just like how we (or we should) write a program. We organize it into pieces.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ts" data-lang="ts"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">reader</span>(<span style="color:#a6e22e">f</span>: <span style="color:#66d9ef">string</span>) {
 <span style="color:#75715e">// read some data
</span><span style="color:#75715e"></span>}

<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">process</span>(<span style="color:#a6e22e">d</span>: <span style="color:#66d9ef">Type</span>) {
    <span style="color:#75715e">// process data
</span><span style="color:#75715e"></span>}

<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">writer</span>(<span style="color:#a6e22e">f</span>: <span style="color:#66d9ef">string</span>) {
    <span style="color:#75715e">// write data
</span><span style="color:#75715e"></span>}

<span style="color:#a6e22e">main</span>(){

}
</code></pre></div><p>The same applies to systems, as well.</p>
<ul>
<li>http services / endpoints</li>
<li>database and persistent layer</li>
<li>logging and instrumentation</li>
</ul>
<p>And as simple and quite the case that might be, people often miss it and don&rsquo;t generalize this to other situations.</p>


  </div>

  <footer class="post-footer">
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="">adonese&#39;s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
